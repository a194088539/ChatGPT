import{_ as F}from"./nuxt-link.03dae9e2.js";import{f as q,E as v,a1 as h,I as N,o as R,C as U,Q as e,R as t,z as r,S as d,s as u,a5 as p,a6 as _,a0 as c}from"./entry.007e379e.js";import{u as B}from"./composables.3ba3c89a.js";import{h as z,f as M}from"./api.0295e011.js";import{u as T}from"./counter.d00f886b.js";import"./index.b36e8ee2.js";import"./cookie.244e42d6.js";const $={class:"authentication"},j={class:"container d-flex flex-column"},D={class:"row align-items-center justify-content-center no-gutters min-vh-100"},E={class:"col-12 col-md-7 col-lg-5 col-xl-4 py-md-11"},H={class:"card border-0 shadow-sm"},I={class:"card-body"},L=e("h3",{class:"text-center"},"重置密码",-1),Q=e("p",{class:"text-center mb-6"}," 请在下面输入你的电子邮件地址，并且发送验证码到你的邮箱。 ",-1),S={class:"input-group mb-2"},A={class:"input-group mb-2"},G={class:"input-group mb-2 ml-2"},J={class:"input-group mb-2"},K={class:"input-group mb-2"},O={class:"text-center mb-0"},te=q({__name:"reset",setup(P){const g=T();B({title:"重置密码 - "+g.setting.title,meta:[{name:"description",content:g.setting.description},{name:"keywords",content:g.setting.keywords}]});const f=v(),s=h({email:"",email_code:"",password:"",password_c:""}),b=h({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],email_code:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度不能小于8位",trigger:"blur"}],password_c:[{required:!0,message:"请确认密码",trigger:"blur"},{min:8,message:"密码长度不能小于8位",trigger:"blur"}]}),y=N(),m=v(!1),x=async a=>{a&&await a.validate((o,n)=>{if(o){if(s.password!=s.password_c){c.error("两次密码不一致");return}m.value=!0,z({email:s.email,email_code:s.email_code,password:s.password}).then(i=>{i._rawValue.status==200&&(c.success(i._rawValue.message),a.resetFields(),y.push({path:"/login"}),m.value=!1)}).catch(i=>{m.value=!1,c.error(i.message)})}else console.log("error submit!",n)})},V=()=>{if(s.email==""){c.error("请填写邮箱");return}M({email:s.email}).then(a=>{a._rawValue.status==200&&c.success(a._rawValue.message)}).catch(a=>{c.error(a.message)})};return(a,o)=>{const n=u("el-form-item"),i=u("el-col"),w=u("el-button"),k=u("el-form"),C=F;return R(),U("div",$,[e("div",j,[e("div",D,[e("div",E,[e("div",H,[e("div",I,[L,Q,t(k,{ref_key:"ruleFormRef",ref:f,model:s,rules:b,class:"demo-ruleForm","status-icon":""},{default:r(()=>[t(n,{prop:"email"},{default:r(()=>[e("div",S,[p(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":o[0]||(o[0]=l=>s.email=l),placeholder:"请填写您的邮箱"},null,512),[[_,s.email]])])]),_:1}),t(n,{prop:"email_code"},{default:r(()=>[t(i,{span:16},{default:r(()=>[e("div",A,[p(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":o[1]||(o[1]=l=>s.email_code=l),placeholder:"请填写您的邮箱验证码"},null,512),[[_,s.email_code]])])]),_:1}),t(i,{span:6,class:"text-center"},{default:r(()=>[e("div",G,[t(w,{type:"primary",class:"form-control form-control-lg pd-2",onClick:o[2]||(o[2]=l=>V())},{default:r(()=>[d("发送验证码")]),_:1})])]),_:1})]),_:1}),t(n,{prop:"password"},{default:r(()=>[e("div",J,[p(e("input",{type:"password",class:"form-control form-control-lg","onUpdate:modelValue":o[3]||(o[3]=l=>s.password=l),placeholder:"填写您的密码"},null,512),[[_,s.password]])])]),_:1}),t(n,{prop:"password"},{default:r(()=>[e("div",K,[p(e("input",{type:"password",class:"form-control form-control-lg","onUpdate:modelValue":o[4]||(o[4]=l=>s.password_c=l),placeholder:"确认您的密码"},null,512),[[_,s.password_c]])])]),_:1}),t(n,null,{default:r(()=>[t(w,{type:"primary",loading:m.value,class:"register",size:"large",onClick:o[5]||(o[5]=l=>x(f.value))},{default:r(()=>[d(" 重置密码 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),e("p",O,[d("已经有账户了？"),t(C,{class:"link",to:"/login"},{default:r(()=>[d("登录")]),_:1}),d(".")])])])])])])])}}});export{te as default};
