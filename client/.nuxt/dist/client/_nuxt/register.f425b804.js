import{_ as F}from"./nuxt-link.03dae9e2.js";import{f as U,E as h,a1 as b,I as q,o as N,C as R,Q as e,R as s,z as l,S as c,s as p,a5 as d,a6 as m,a0 as f}from"./entry.007e379e.js";import{u as B}from"./composables.3ba3c89a.js";import{r as z,f as M}from"./api.0295e011.js";import{u as T}from"./counter.d00f886b.js";import"./index.b36e8ee2.js";import"./cookie.244e42d6.js";const $={class:"authentication"},j={class:"container d-flex flex-column"},D={class:"row align-items-center justify-content-center no-gutters min-vh-100"},E={class:"col-12 col-md-7 col-lg-5 col-xl-4 py-md-11"},H={class:"card border-0 shadow-sm"},I={class:"card-body"},L=e("h3",{class:"text-center"},"注册",-1),Q=e("p",{class:"text-center mb-6"},"创建一个免费账户",-1),S={class:"input-group mb-2"},A={class:"input-group mb-2"},G={class:"input-group mb-2"},J={class:"input-group mb-2 ml-2"},K={class:"input-group mb-2"},O={class:"input-group mb-2"},P={class:"text-center mb-0"},le=U({__name:"register",setup(W){const _=T();B({title:"注册 - "+_.setting.title,meta:[{name:"description",content:_.setting.description},{name:"keywords",content:_.setting.keywords}]});const g=h(),o=b({name:"",email:"",password:"",email_code:"",invite_code:""}),w=b({name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],email_code:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}]}),y=q(),u=h(!1),x=async a=>{a&&await a.validate((t,n)=>{t?(u.value=!0,z({name:o.name,email:o.email,password:o.password,email_code:o.email_code,invite_code:o.invite_code}).then(i=>{i._rawValue.status==200&&(f.success(i._rawValue.message),a.resetFields(),y.push({path:"/login"}),u.value=!1)}).catch(i=>{u.value=!1})):console.log("error submit!",n)})},V=()=>{if(o.email==""){f.error("请填写邮箱");return}M({email:o.email}).then(a=>{a._rawValue.status==200&&f.success(a._rawValue.message)}).catch(a=>{console.log(a)})};return(a,t)=>{const n=p("el-form-item"),i=p("el-col"),v=p("el-button"),k=p("el-form"),C=F;return N(),R("div",$,[e("div",j,[e("div",D,[e("div",E,[e("div",H,[e("div",I,[L,Q,s(k,{ref_key:"ruleFormRef",ref:g,model:o,rules:w,class:"demo-ruleForm","status-icon":""},{default:l(()=>[s(n,{prop:"name"},{default:l(()=>[e("div",S,[d(e("input",{type:"text",class:"form-control form-control-lg","onUpdate:modelValue":t[0]||(t[0]=r=>o.name=r),placeholder:"填写您的用户名"},null,512),[[m,o.name]])])]),_:1}),s(n,{prop:"email"},{default:l(()=>[e("div",A,[d(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":t[1]||(t[1]=r=>o.email=r),placeholder:"请填写您的邮箱"},null,512),[[m,o.email]])])]),_:1}),s(n,{prop:"email_code"},{default:l(()=>[s(i,{span:16},{default:l(()=>[e("div",G,[d(e("input",{type:"email",class:"form-control form-control-lg","onUpdate:modelValue":t[2]||(t[2]=r=>o.email_code=r),placeholder:"请填写您的邮箱验证码"},null,512),[[m,o.email_code]])])]),_:1}),s(i,{span:6,class:"text-center"},{default:l(()=>[e("div",J,[s(v,{type:"primary",class:"form-control form-control-lg pd-2",onClick:t[3]||(t[3]=r=>V())},{default:l(()=>[c("发送验证码")]),_:1})])]),_:1})]),_:1}),s(n,{prop:"password"},{default:l(()=>[e("div",K,[d(e("input",{type:"password",class:"form-control form-control-lg","onUpdate:modelValue":t[4]||(t[4]=r=>o.password=r),placeholder:"填写您的密码"},null,512),[[m,o.password]])])]),_:1}),s(n,{prop:"invite_code"},{default:l(()=>[e("div",O,[d(e("input",{type:"invite_code",class:"form-control form-control-lg","onUpdate:modelValue":t[5]||(t[5]=r=>o.invite_code=r),placeholder:"填写您的邀请码（可选）"},null,512),[[m,o.invite_code]])])]),_:1}),s(n,null,{default:l(()=>[s(v,{type:"primary",loading:u.value,class:"register",size:"large",onClick:t[6]||(t[6]=r=>x(g.value))},{default:l(()=>[c(" 注册 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),e("p",P,[c("已经有账户了? "),s(C,{class:"link",to:"/login"},{default:l(()=>[c("登录")]),_:1}),c(".")])])])])])])])}}});export{le as default};
