{"version":3,"file":"ai_draw-83854b3a.js","sources":["../../../../assets/images/loading2.gif","../../../../pages/ai_draw.vue"],"sourcesContent":["export default \"__VITE_ASSET__310c6fe4__\"","<template>\n    <div class=\"main px-xl-5 px-lg-4 px-3 overflow-auto bg-ai\">\n        <div class=\"body-header border-bottom py-xl-3 py-2\">\n            <div class=\"container px-0\">\n                <div class=\"row align-items-center\">\n                    <div class=\"col-12\">\n                        <div class=\"media\">\n                            <div class=\"avatar sm\"><a href=\"/\" class=\"link\" title=\"\"><i\n                                class=\"zmdi zmdi-arrow-left zmdi-hc-lg\"></i></a></div>\n                            <div class=\"media-body overflow-hidden\">\n                                <div class=\"d-flex align-items-center mb-1\"><h6\n                                    class=\"fw-bold text-truncate mb-0 me-auto\">AI绘图</h6></div>\n                                <div class=\"text-truncate\">绘图有好有坏，根据关键词生成~大约需要30s左右时间</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"main-body mt-2\">\n            <div class=\"rlshRpVg\">\n                <div class=\"ant-form ant-form-horizontal\">\n                    <el-alert :title=\"dw_new_desc\" type=\"primary\" class=\"mb-2 mt-2\" />\n\n                    <div class=\"c79YxChY\">\n\n                        <div class=\"QfmmweN6\">\n                            <div class=\"ROxH2OCe\" @click=\"change_prompt()\">换示例</div>\n                            <div class=\"EhlHQai2\">Prompt示例：<span>{{ prompt_info }}</span></div>\n                        </div>\n\n                    </div>\n                    <div class=\"mt-4\">\n                        <el-input v-model=\"input2\" @keydown.enter.native=\"ai_draw()\" placeholder=\"请用中文输入Prompt，参考形式：画面主体，细节描述，修饰词\" size=\"large\">\n                            <template #append>\n                                <el-button @click=\"ai_draw()\"  :loading=\"draw_loading\">\n                                    <i class=\"zmdi zmdi-collection-image-o up_images\"></i>生成\n                                </el-button>\n                            </template>\n                        </el-input>\n                    </div>\n                    <div class=\"IBB02stq\">\n                        <div class=\"IJeKKhVO\"><strong>参数设置</strong>\n                            <div class=\"BjFvnDFr\">\n                                <div>\n                                    <div class=\"tJ3Uxp5n\"><span class=\"d1v8F9_X\">图片尺寸：</span>\n                                        <div class=\"UXmDHLrm\">\n                                            <span v-for=\"(s,s_index) in all_size\" :key=\"s_index\" :class=\"size==s.value?'OMJ2YPhL':''\" @click=\"change_size(s.value)\">{{ s.name }}</span>\n                                        </div>\n                                    </div>\n                                    <div class=\"tJ3Uxp5n\"><span class=\"O8rMyJiP\">图片数量：</span>\n                                        <div class=\"UXmDHLrm\">\n                                            <span v-for=\"(i,i_index) in images_list\" :key=\"i_index\" :class=\"image_select==i.value?'OMJ2YPhL':''\" @click=\"change_i(i.value)\">{{i.name}}</span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div class=\"LD_v91KZ\">\n                            <div class=\"i6ZRhNSs\"><strong>修饰词参考</strong><span class=\"Ml1AlIeV\">您可参考或选用下列各类修饰词丰富您的输入文本，尝试生成更加多样的图像，更多修饰词可参考 <span>Prompt指南</span> 或 自由输入 探索大模型作画更多未知能力</span>\n                            </div>\n                            <div class=\"eTPUL0mm\">\n                                <div class=\"rANRXgV2\"><strong>图像类型</strong>\n                                    <div class=\"k9FL7lPf\">\n                                        <span v-for=\"(ty,ty_index) in image_type\" :key=\"ty_index\" @click=\"get_info(ty.name)\">{{ ty.name }}\n                                            {{ty_index!=image_type.length-1?'、':''}}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <!--finish go-->\n                <div class=\"ernie-vilg-image\" v-if=\"is_sc || is_finish\">\n                    <div>\n                        <div class=\"ernie-vilg-item-desc\" v-if=\"is_sc || is_finish\" style=\"margin-bottom: 0px;\">正在生成中，预计需要 30s</div>\n\n                        <div class=\"eE9d1okq\" style=\"margin-top: 20px;\" v-if=\"is_sc\">\n                            <div class=\"ernie-vilg-image-item\" v-for=\"item in image_select\">\n                                <img class=\"ernie-vilg-image-item-img\" src=\"@/assets/images/loading2.gif\">\n                            </div>\n                        </div>\n                        <div class=\"eE9d1okq\" style=\"margin-top: 20px;\" v-if=\"is_finish\">\n                            <div class=\"ernie-vilg-image-item\" v-for=\"(image,fi_index) in r_images\" :key=\"fi_index\">\n                                <img class=\"ernie-vilg-image-item-img\" :src=\"image.url\">\n\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n                <!--finish go end-->\n                <!--show me up-->\n                <el-tabs v-model=\"activeName\" class=\"mt-4\">\n                    <el-tab-pane label=\"我的生成\" name=\"first\">\n                        <el-row :gutter=\"20\" v-if=\"me_draw.length>0\">\n                            <el-col\n                                v-for=\"(m,m_index) in me_draw\" :key=\"m_index\"\n                                :span=\"6\"\n                            >\n                                <el-card :body-style=\"{ padding: '0px' }\" class=\"mb-2\" >\n                                    <img\n                                        :src=\"m.image\"\n                                        class=\"image\"\n                                    />\n                                    <div style=\"padding: 10px 0px\" class=\"me_show_pic\">\n\n                                        <el-popover\n                                            placement=\"top-start\"\n                                            title=\"Prompt:\"\n                                            :width=\"200\"\n                                            trigger=\"hover\"\n                                            :content=\"m.title\"\n                                        >\n                                            <template #reference>\n                                                <span>{{ m.title }}</span>\n                                            </template>\n                                        </el-popover>\n                                        <div class=\"bottom\">\n                                            <el-button type=\"danger\" text class=\"button\"\n                                                       v-if=\"m.is_public==0\"\n                                                       @click=\"send_pub(0,m.id)\"\n                                            >私密\n                                            </el-button>\n                                            <el-button type=\"primary\" text class=\"button\"\n                                                       v-else\n                                                       @click=\"send_pub(1,m.id)\"\n                                            >公开\n                                            </el-button>\n                                        </div>\n                                    </div>\n                                </el-card>\n                            </el-col>\n                        </el-row>\n                        <el-empty description=\"暂无数据哦~\" v-else />\n\n                    </el-tab-pane>\n                    <el-tab-pane label=\"公共生成\" name=\"second\">\n                        <el-row :gutter=\"20\" v-if=\"public_draw.length>0\">\n                            <el-col\n                                v-for=\"(p,p_index) in public_draw\" :key=\"p_index\"\n                                :span=\"6\"\n                            >\n                                <el-card :body-style=\"{ padding: '0px' }\" class=\"mb-2\" >\n                                    <img\n                                        :src=\"p.image\"\n                                        class=\"image\"\n                                    />\n                                    <div style=\"padding: 10px 0px\" class=\"me_show_pic\">\n                                        <el-tooltip\n                                            class=\"box-item\"\n                                            effect=\"dark\"\n                                            :content=p.title\n                                            placement=\"bottom\"\n                                        >\n                                            <span>{{ p.title }}</span>\n                                        </el-tooltip>\n\n                                    </div>\n                                </el-card>\n                            </el-col>\n                        </el-row>\n                        <el-empty description=\"暂无数据哦~\" v-else />\n                    </el-tab-pane>\n\n                </el-tabs>\n\n                <!--show me up end-->\n                <div>\n\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {send_public} from \"~/utils/api\";\nimport { useCounter } from '~/store/counter'\nconst counter = useCounter()\n\nuseHead({\n    title: 'AI绘画 - '+counter.setting.title,\n    meta: [\n        { name: 'description', content: counter.setting.description},\n        { name: 'keywords', content: counter.setting.keywords}\n    ]\n})\ndefinePageMeta({\n    middleware: ['islogin']\n})\n\nimport {ref} from \"vue\";\nimport {ElMessage} from \"element-plus\";\n// 1\nconst onSuccess = () => {\n    console.log('success')\n}\n\n\nconst onError = () => {\n    console.log('error')\n}\nconst user_info = useCookie('user_info')\nconst input2 = ref('')\nconst size = ref('256x256')\nconst image_select = ref(1)\nconst all_size = [\n    {\n        name: '256x256(小图)',\n        value: '256x256'\n    },\n    {\n        name: '512x512(中图)',\n        value: '512x512'\n    },\n    {\n        name: '1024x1024(大图)',\n        value: '1024x1024'\n    },\n]\nconst images_list = ref([\n    {\n        name:'1张',\n        value:1\n    },\n    {\n        name:'2张',\n        value:2\n    },\n    {\n        name:'3张',\n        value:3\n    },\n    {\n        name:'4张',\n        value:4\n    },\n    {\n        name:'5张',\n        value:5\n    },\n    {\n        name:'6张',\n        value:6\n    },\n    {\n        name:'7张',\n        value:7\n    },\n    {\n        name:'8张',\n        value:8\n    },\n    {\n        name:'9张',\n        value:9\n    },\n    {\n        name:'10张',\n        value:10\n    },\n])\nconst prompt_info = ref('超级逼真的未来世界，真实照片，虚幻引擎')\nconst all_prompt =[\n    '超级逼真的未来世界，真实照片，虚幻引擎',\n    '二次元少女，美丽，大方，精致脸庞',\n    '帅哥，二次元，赛博朋克风格，精致脸庞',\n    '古风，青山相看两不厌，丹青水墨，中国风',\n    '萌萌哒，可爱，二次元，精致脸庞',\n    '兔子，可爱，高质量，高品质',\n]\nconst change_prompt = ()=>{\n    // 数组中all_prompt随机拿数据改变prompt_info并且判断不和上一次一样\n    let random = Math.floor(Math.random()*all_prompt.length)\n    if(prompt_info.value == all_prompt[random]){\n        change_prompt()\n    }else{\n        prompt_info.value = all_prompt[random]\n    }\n}\nconst change_size  = (s_v:string)=>{\n    size.value = s_v\n}\nconst change_i= (i_v:number)=>{\n    image_select.value = i_v\n}\nconst r_images = ref([])\nconst draw_loading = ref(false)\nconst is_sc = ref(false)\nconst is_finish = ref(false)\nconst activeName = ref('first')\nconst me_draw = ref([])\nconst public_draw = ref([])\nconst ai_draw = ()=>{\n    if(input2.value == ''){\n        ElMessage.error('请填写关键词')\n        return false;\n    }\n    is_sc.value = true\n    draw_loading.value = true\n    ai_draw_openai({\n        prompt:input2.value,\n        size:size.value,\n        number:image_select.value,\n    }).then((res:any)=>{\n        r_images.value = res._rawValue.data\n        is_finish.value = true\n        is_sc.value = false\n        ElMessage.success('生成成功')\n        get_me_d()\n        draw_loading.value = false\n    }).catch((err:any)=>{\n        ElMessage.error('生成失败')\n        is_sc.value = false\n        draw_loading.value = false\n    })\n}\nconst ai_draw_pay = ref('0')\nconst dw_new_desc = ref('每张图生成需要扣费'+ai_draw_pay.value+'会员扣除次数~')\nconst get_me_d = ()=>{\n    get_me_draw().then((res:any)=>{\n        me_draw.value = res._rawValue.data\n        public_draw.value = res._rawValue.public\n        ai_draw_pay.value = res._rawValue.dw_m\n        dw_new_desc.value = '每张图生成需要扣费'+ai_draw_pay.value+',会员扣除次数~'\n    }).catch((err:any)=>{\n        console.log(err)\n    })\n}\nget_me_d()\nconst send_pub=(c:number,mid:number)=>{\n    send_public({\n        draw_id:mid\n    }).then((res:any)=>{\n        ElMessage.success(res._rawValue.message)\n        get_me_d()\n    }).catch((err:any)=>{\n        console.log(err)\n    })\n}\nconst image_type = ref([\n    {\n        name:'古风',\n    },\n    {\n        name:'二次元',\n    },\n    {\n        name:'写实照片',\n    },\n    {\n        name:'油画'\n    },\n    {\n        name:'水彩画'\n    },\n    {\n        name:'油墨画'\n    },\n    {\n        name:'黑白雕版画'\n    },\n    {\n        name:'雕塑'\n    },\n    {\n        name:'3D模型'\n    },\n    {\n        name:'手绘草图'\n    },\n    {\n        name:'炭笔画'\n    },\n    {\n        name:'极简线条画'\n    },\n    {\n        name:'浮世绘'\n    },\n    {\n        name:'电影质感'\n    },\n    {\n        name:'机械感'\n    },\n\n])\nconst get_info = (name:string)=>{\n    if(input2.value == ''){\n        input2.value = name\n    }else{\n        input2.value = input2.value+'，'+name\n    }\n}\n</script>\n\n<style>\n\n</style>\n"],"names":["useHead","title","meta","name","content","value","ElMessage","ai_draw_openai","r_images","get_me_d","get_me_draw","me_draw","public_draw","ai_draw_pay","console","send_public","draw_id"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAe,aAAA,KAAA,iBAAA,uBAAA;;;;;;ACwLPA,YAAAA;AAAAA,MACJC,OAAAA,YAAAA,QAAAA,QAAAA;AAAAA,MACAC,MAAAA,CAAAA;AAAAA,QACMC,MAAAA;AAAAA,QAAqBC,SAAAA,QAAAA,QAAAA;AAAAA,MAAoC,GAAA;AAAA,QACzDD,MAAAA;AAAAA,QAAkBC,SAAAA,QAAAA,QAAAA;AAAAA;IAE5B,CAAA;AAgBM,cAAA,WAAA;AACA,UAAA,SAAA,IAAA,EAAA;AACA,UAAA,OAAA,IAAA,SAAA;AACA,UAAA,eAAA,IAAA,CAAA;;MAGED,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,CAAA;AAEJ,UAAA,cAAA,IAAA,CAAA;AAAA,MAEQF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIF,MAAAA;AAAAA,MACAE,OAAAA;AAAAA,IACJ,CAAA,CAAA;AAEE,UAAA,cAAA,IAAA,qBAAA;AAwBA,UAAA,WAAA,IAAA,CAAA,CAAA;AACA,UAAA,eAAA,IAAA,KAAA;AACA,UAAA,QAAA,IAAA,KAAA;AACA,UAAA,YAAA,IAAA,KAAA;AACA,UAAA,aAAA,IAAA,OAAA;AACA,UAAA,UAAA,IAAA,CAAA,CAAA;AACA,UAAA,cAAA,IAAA,CAAA,CAAA;;AAEC,UAAA,OAAA,SAAA,IAAA;AACCC,kBAAAA,MAAAA,QAAAA;AACO,eAAA;AAAA,MACX;;;AAGeC,qBAAAA;AAAAA;;;MAIf,CAAA,EAAA,KAAA,SAAA;AACaC,iBAAAA,QAAAA,IAAAA,UAAAA;;;AAGTF,kBAAAA,QAAAA,MAAAA;AACSG;;MAEb,CAAA,EAAA,MAAA,SAAA;AACIH,kBAAAA,MAAAA,MAAAA;;;MAGJ,CAAA;AAAA;AAEE,UAAA,cAAA,IAAA,GAAA;;;AAGUI,kBAAAA,EAAAA,KAAAA,SAAAA;AACAC,gBAAAA,QAAAA,IAAAA,UAAAA;AACIC,oBAAAA,QAAAA,IAAAA,UAAAA;AACAC,oBAAAA,QAAAA,IAAAA,UAAAA;;MAEhB,CAAA,EAAA,MAAA,SAAA;AACIC,gBAAAA,IAAAA,GAAAA;AAAAA,MACJ,CAAA;AAAA;AAEKL;AACH,UAAA,WAAA,CAAA,GAAA,QAAA;AACUM,kBAAAA;AAAAA,QACRC,SAAAA;AAAAA,MACJ,CAAA,EAAA,KAAA,SAAA;;AAEaP;MACb,CAAA,EAAA,MAAA,SAAA;AACIK,gBAAAA,IAAAA,GAAAA;AAAAA,MACJ,CAAA;AAAA;AAEJ,UAAA,aAAA,IAAA,CAAA;AAAA,MAEQX,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,GAAA;AAAA,MAEIA,MAAAA;AAAAA,IACJ,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}