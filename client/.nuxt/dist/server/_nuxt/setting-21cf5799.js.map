{"version":3,"file":"setting-21cf5799.js","sources":["../../../../pages/users/setting.vue"],"sourcesContent":["<template>\n    <div class=\"sidebar border-end py-xl-4 py-3 px-xl-4 px-3\">\n        <div class=\"tab-content\">\n\n            <div class=\"tab-pane fade show active\" id=\"nav-tab-user\" role=\"tabpanel\">\n\n                <div class=\"d-flex justify-content-between align-items-center mb-4\">\n                    <h4 class=\"mb-0 text-primary\">Profile</h4>\n                    <div>\n                        <div @click=\"sigt_out()\" title=\"\" class=\"btn btn-dark\">退出登录</div>\n                    </div>\n                </div>\n\n                <div class=\"card border-0 text-center pt-3 mb-4\">\n                    <div class=\"card-body\">\n                        <div class=\"card-user-avatar\">\n                            <img :src=\"me_info.avatar\" alt=\"avatar\" class=\"avatar-150\">\n                            <el-upload\n                                class=\"avatar-uploader\"\n                                :action=\"actions\"\n                                :show-file-list=\"false\"\n                                :headers=\"{'Authorization': 'Bearer ' + token}\"\n                                :on-success=\"handleAvatarSuccess\"\n                                :before-upload=\"beforeAvatarUpload\"\n                            >\n                                <button type=\"button\" class=\"btn btn-primary btn-sm\"><i class=\"zmdi zmdi-edit\"></i></button>\n                            </el-upload>\n                        </div>\n                        <div class=\"card-user-detail mt-4\">\n                            <h5>{{ me_info.name }}</h5>\n                            <span class=\"text-muted\"><div class=\"__cf_email__\">{{ me_info.email }}</div></span>\n                            <p>{{ me_info.phone }}</p>\n                            {{ me_info.description }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n        </div>\n    </div>\n    <div class=\"main px-xl-5 px-lg-4 px-3 overflow-auto\">\n\n        <div class=\"main-body\">\n\n            <div class=\"body-header border-bottom py-xl-3 py-2\">\n                <div class=\"container px-0\">\n                    <div class=\"row align-items-center\">\n\n                        <div class=\"col-12\">\n                            <div class=\"media\">\n                                <div class=\"avatar sm\">\n                                    <NuxtLink to=\"/\" title=\"\" class=\"link\"><i\n                                        class=\"zmdi zmdi-arrow-left zmdi-hc-lg\"></i></NuxtLink>\n                                </div>\n                                <div class=\"media-body overflow-hidden\">\n                                    <div class=\"d-flex align-items-center mb-1\">\n                                        <h6 class=\"fw-bold text-truncate mb-0 me-auto\">设置</h6>\n                                    </div>\n                                    <div class=\"text-truncate\">修改用户配置信息</div>\n                                </div>\n                                <div  @click=\"sigt_out()\"  class=\"hide-btn btn btn-dark sidebar-toggle-btn\">退出</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"body-page d-flex py-xl-3 py-2\">\n                <div class=\"container px-0\">\n\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <ul class=\"nav nav-tabs nav-overflow page-header-tabs mb-4 mt-md-5 mt-3\">\n                                <li class=\"nav-item\" @click=\"change_set('me')\"><a class=\"nav-link\" :class=\"c_change=='me'?'active':''\" data-toggle=\"tab\"\n                                                        href=\"javascript:;\" role=\"tab\">个人信息</a></li>\n                                <li class=\"nav-item\" @click=\"change_set('wallet')\"><a class=\"nav-link\" :class=\"c_change=='wallet'?'active':''\" data-toggle=\"tab\" href=\"javascript:;\"\n                                                        role=\"tab\">钱包</a></li>\n                                <li class=\"nav-item\" @click=\"change_set('pass')\"><a class=\"nav-link\" :class=\"c_change=='pass'?'active':''\" data-toggle=\"tab\" href=\"javascript:;\"\n                                                        role=\"tab\">密码</a></li>\n                                <li class=\"nav-item\" @click=\"change_set('vip')\"><a class=\"nav-link\" :class=\"c_change=='vip'?'active':''\" data-toggle=\"tab\" href=\"javascript:;\"\n                                                                                    role=\"tab\">VIP会员</a></li>\n                                <li class=\"nav-item\" @click=\"change_set('invite')\"><a class=\"nav-link\" :class=\"c_change=='invite'?'active':''\" data-toggle=\"tab\" href=\"javascript:;\"\n                                                                                   role=\"tab\">邀请码</a></li>\n                            </ul>\n                        </div>\n                    </div>\n\n                    <div class=\"tab-content\">\n\n                        <div class=\"tab-pane fade\" :class=\"c_change=='me'?'show active':''\" role=\"tabpanel\">\n                            <div class=\"row\">\n                                <div class=\"col-12\">\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-header\">\n                                            <h6 class=\"card-title mb-0\">用户设置</h6>\n                                            <span class=\"text-muted small\">更新您的信息</span>\n                                        </div>\n                                        <div class=\"card-body\">\n                                            <!--<el-skeleton :rows=\"5\" animated v-if=\"now_loading\" />-->\n                                            <form class=\"row g-3\">\n                                                <div class=\"col-lg-4 col-md-6 col-sm-12\">\n                                                    <div class=\"form-group\">\n                                                        <div class=\"input-group\">\n                                                            <input type=\"text\" class=\"form-control form-control-lg\"\n                                                                   placeholder=\"Enter your name\" v-model=\"me_info.name\">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-lg-4 col-md-6 col-sm-12\">\n                                                    <div class=\"form-group\">\n                                                        <div class=\"input-group\">\n                                                            <input type=\"text\" class=\"form-control form-control-lg\"\n                                                                   placeholder=\"Enter phone\" v-model=\"me_info.phone\">\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-lg-4 col-md-6 col-sm-12\">\n                                                    <div class=\"form-group\">\n                                                        <div class=\"input-group\">\n                                                            <input type=\"text\" class=\"form-control form-control-lg\"\n                                                                   placeholder=\"Enter your email\" v-model=\"me_info.email\" disabled>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"col-12\">\n                                                    <div class=\"form-group\">\n                                                        <div class=\"input-group\">\n                                                            <textarea rows=\"4\" class=\"form-control\"\n                                                                      placeholder=\"Enter Bio\" v-model=\"me_info.description\"></textarea>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-12\">\n                                                    <el-button type=\"primary\" @click=\"update_info()\" :loading=\"up_loading\">\n                                                        更新信息\n                                                    </el-button>\n                                                </div>\n                                            </form>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n\n                        <div class=\"tab-pane fade\" :class=\"c_change=='wallet'?'show active':''\" role=\"tabpanel\">\n                            <div class=\"row\">\n\n                                <div class=\"col-12 col-md-6\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row align-items-end\">\n                                                <div class=\"col\">\n                                                    <h6 class=\"text-uppercase text-muted mb-1 small\">余额</h6>\n                                                    <span class=\"h3 mb-0\">${{ me_info.money }}/R</span>\n                                                </div>\n                                                <div class=\"col-auto\">\n                                                    <div class=\"btn btn-sm btn-dark\" v-if=\"counter.setting.pay_wechat_open==1 || counter.setting.pay_alipay_open==1\" @click=\"charge()\">充值</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                                <div class=\"col-12 col-md-6\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row align-items-end\">\n                                                <div class=\"col\">\n                                                    <h6 class=\"text-uppercase text-muted mb-1 small\">卡密兑换</h6>\n                                                    <span class=\"h3 mb-0\">\n                                                        <el-input v-model=\"kami_code\" placeholder=\"请填写卡密信息\"></el-input>\n                                                    </span>\n                                                </div>\n                                                <div class=\"col-auto\">\n                                                    <a :href=\"counter.setting.buy_card\" class=\"btn btn-sm el-button el-button--success btn btn-sm\">购买卡密</a>\n                                                    <el-button :loading=\"kami_loading\" type=\"primary\" class=\"btn btn-sm\" @click=\"change_code()\">兑换</el-button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                                <el-dialog class=\"msgbox\" v-model=\"dialogFormVisible\"  title=\"余额充值\" width=\"20%\" append-to-body>\n                                    <div class=\"qr_fing\" v-loading=\"qr_load\">\n                                        <qrcode-vue  v-if=\"qr_show\" :value=\"pay_scan\" size=\"240\" class=\"mt-2 mb-2 m-auto d-sm-block\"  ></qrcode-vue>\n                                    </div>\n\n                                    <el-form :model=\"form\">\n                                        <el-form-item label=\"充值\">\n                                            <el-input v-model=\"form.amount\" autocomplete=\"off\" placeholder=\"请输入充值金额\" />\n                                        </el-form-item>\n                                        <el-form-item label=\"支付方式\">\n                                            <el-radio v-if=\"counter.setting.pay_wechat_open==1\"  v-model=\"form.pay_type\" label=\"wechat\">微信</el-radio>\n                                            <el-radio v-if=\"counter.setting.pay_alipay_open==1\" v-model=\"form.pay_type\" label=\"alipay\">支付宝</el-radio>\n                                        </el-form-item>\n\n                                    </el-form>\n                                    <template #footer>\n                                      <span class=\"dialog-footer\">\n                                        <el-button type=\"primary\" @click=\"send_charge()\" :loading=\"charge_loading\">\n                                          立即充值\n                                        </el-button>\n                                          <el-button type=\"primary\" plain @click=\"dialogFormVisible = false\">\n                                              完成支付\n                                          </el-button>\n                                      </span>\n                                    </template>\n                                </el-dialog>\n\n                                <div class=\"col-12\">\n                                    <el-table :data=\"tableData\" stripe style=\"width: 100%\">\n                                        <el-table-column prop=\"created_at\" label=\"时间\" />\n                                        <el-table-column prop=\"order_id\" label=\"订单编号\" />\n                                        <el-table-column prop=\"amount\" label=\"金额\" />\n                                        <el-table-column label=\"支付状态\">\n                                            <template #default=\"scope\">\n                                                {{scope.row.status=='0'?'未支付':'已支付'}}\n                                            </template>\n                                        </el-table-column>\n                                        <el-table-column label=\"支付方式\">\n                                            <template #default=\"scope\">\n                                                {{scope.row.way=='wechat'?'微信支付':'支付宝支付'}}\n                                            </template>\n                                        </el-table-column>\n                                    </el-table>\n                                </div>\n                            </div>\n                        </div>\n\n\n                        <div class=\"tab-pane fade\" :class=\"c_change=='pass'?'show active':''\" role=\"tabpanel\">\n                            <div class=\"row justify-content-between mb-4\">\n                                <div class=\"col-12 col-md-6\">\n                                    <h5>更改密码</h5>\n                                </div>\n                                <div class=\"col-auto\">\n                                    <NuxtLink to=\"/users/reset\" class=\"btn btn-warning\">忘记你的密码?</NuxtLink>\n                                </div>\n                            </div>\n                            <div class=\"row g-3\">\n                                <div class=\"col-12\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <form class=\"row\">\n                                                <div class=\"col-lg-4 col-md-12\">\n                                                    <div class=\"form-group mb-3\">\n                                                        <label>旧密码</label>\n                                                        <input type=\"email\" class=\"form-control\" v-model=\"pass_all.old_password\">\n                                                    </div>\n                                                    <div class=\"form-group mb-3\">\n                                                        <label>新密码</label>\n                                                        <input type=\"email\" class=\"form-control\"  v-model=\"pass_all.new_password\">\n                                                    </div>\n                                                    <div class=\"form-group mb-3\">\n                                                        <label>确认密码</label>\n                                                        <input type=\"email\" class=\"form-control\" v-model=\"pass_all.new_password_confirmation\">\n                                                    </div>\n                                                    <el-button type=\"primary\" @click=\"c_pass()\" :loading=\"pass_loading\">\n                                                        更新密码\n                                                    </el-button>\n                                                </div>\n                                                <div class=\"col-lg-8 col-md-12\">\n\n                                                    <div class=\"card bg-light border\">\n                                                        <div class=\"card-body\">\n                                                            <p class=\"mb-2\">密码要求</p>\n                                                            <p class=\"small text-muted mb-2\">\n                                                                要创建一个新的密码，你必须满足以下所有要求。\n                                                            </p>\n\n                                                            <ul class=\"small text-muted ps-4 mb-0\">\n                                                                <li>最少8个字符</li>\n                                                                <li>至少带有一个数字</li>\n                                                                <li>不能和旧密码相同</li>\n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </form>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                        </div>\n                        <div class=\"tab-pane fade\" :class=\"c_change=='vip'?'show active':''\" role=\"tabpanel\">\n                            <div class=\"row\">\n\n                                <div class=\"col-12 col-md-6\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row align-items-center\">\n                                                <div class=\"col\">\n                                                    <h6 class=\"text-uppercase text-muted mb-1 small\">VIP等级</h6>\n                                                    <span class=\"h3 mb-0\">{{ me_vip? me_vip.title:'免费会员' }}</span>\n                                                    <span class=\"text-gray mt-2 d-sm-block\">到期时间：{{ me_vip?me_vip.expire_time:'永久' }}</span>\n                                                </div>\n                                                <div class=\"col-auto\">\n                                                    <div class=\"btn btn-sm btn-dark\" @click=\"up_vip_dialog()\" v-if=\"counter.setting.pay_wechat_open==1 || counter.setting.pay_alipay_open==1\">升级</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"col-12 col-md-6\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row align-items-end\">\n                                                <div class=\"col\">\n                                                    <h6 class=\"text-uppercase text-muted mb-1 small\">卡密兑换</h6>\n                                                    <span class=\"h3 mb-0\">\n                                                        <el-input v-model=\"kami_code\" placeholder=\"请填写卡密信息\"></el-input>\n                                                    </span>\n                                                </div>\n                                                <div class=\"col-auto\">\n                                                    <a :href=\"counter.setting.buy_card\" class=\"btn btn-sm el-button el-button--success btn btn-sm\">购买卡密</a>\n                                                    <el-button :loading=\"kami_loading\" type=\"primary\" class=\"btn btn-sm\" @click=\"change_code()\">兑换</el-button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n\n                                <div class=\"col-12\">\n                                    <!--vip introduct-->\n                                    <div class=\"module-privilege mb-2\">\n                                        <ul class=\"privilege-ul name-ul\">\n                                            <li class=\"privilege-item first-item\">\n                                                <p class=\"title\">\n                                                    <span>功能特权</span>\n                                                </p>\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">\n                                                <a>描述</a>\n                                            </li>\n                                            <li class=\"privilege-item\">\n                                                <a>价格</a>\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">\n                                                <a>每天限制问答次数</a>\n                                            </li>\n                                            <li class=\"privilege-item\">\n                                                <a>每天限制绘画次数</a>\n                                            </li>\n                                        </ul>\n                                        <ul class=\"privilege-ul vip-ul \" v-for=\"(vs,vs_index) in vip_list\" :key=\"vs_index\">\n                                            <li class=\"privilege-item first-item\">\n                                                <div class=\"vip-type\">\n                                                    <p class=\"vip-type-icon\">\n                                                        <span class=\"vip-icon vip-middle icon-size-middle\"></span>\n                                                    </p>\n                                                    <span class=\"vip-type-title\">{{ vs.title }}</span>\n                                                </div>\n                                                <div class=\"buy-btn-box\">\n                                                    <p class=\"center-button-base center-button-light-red center-button-container-middle\">开通会员\n                                                    </p>\n                                                </div>\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">{{ vs.description }}</li>\n                                            <li class=\"privilege-item\">￥ {{vs.pay_amount}}</li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">{{ vs.limit_send }} 次</li>\n                                            <li class=\"privilege-item\">{{ vs.limit_draw }} 次</li>\n\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <el-table :data=\"tableVip\" stripe style=\"width: 100%\">\n                                        <el-table-column prop=\"created_at\" label=\"时间\" />\n                                        <el-table-column prop=\"title\" label=\"标题\" />\n                                        <el-table-column prop=\"order_id\" label=\"订单编号\" />\n                                        <el-table-column prop=\"amount\" label=\"金额\" />\n                                        <el-table-column label=\"支付状态\">\n                                            <template #default=\"scope\">\n                                                {{scope.row.status=='0'?'未支付':'已支付'}}\n                                            </template>\n                                        </el-table-column>\n                                        <el-table-column label=\"支付方式\">\n                                            <template #default=\"scope\">\n                                                {{scope.row.way=='wechat'?'微信支付':'支付宝支付'}}\n                                            </template>\n                                        </el-table-column>\n                                    </el-table>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div class=\"tab-pane fade\" :class=\"c_change=='invite'?'show active':''\"  role=\"tabpanel\">\n                            <div class=\"row\">\n\n                                <div class=\"col-12 col-md-6\">\n\n                                    <div class=\"card mb-4\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row align-items-center\">\n                                                <div class=\"col\">\n                                                    <h6 class=\"text-uppercase text-muted mb-1 small\">邀请码</h6>\n                                                    <span class=\"h3 mb-0 invite_code\">{{ invite_code }}</span>\n                                                </div>\n                                                <div class=\"col-auto\">\n                                                    <div class=\"btn btn-sm btn-dark\" @click=\"invite_up()\">生成邀请码</div>\n\n                                                    <div class=\"btn btn-sm btn-dark ml-2\" @click=\"copy_invite()\">复制邀请码</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <!--vip introduct-->\n                                    <div class=\"module-privilege mb-2\">\n                                        <ul class=\"privilege-ul name-ul\">\n                                            <li class=\"privilege-item first-item\">\n                                                <p class=\"title\">\n                                                    <span>邀请奖励</span>\n                                                </p>\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">\n                                                <a>邀请人数</a>\n                                            </li>\n                                            <li class=\"privilege-item\">\n                                                <a>奖励额度</a>\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">\n                                                <a>奖励会员</a>\n                                            </li>\n\n                                        </ul>\n                                        <ul class=\"privilege-ul vip-ul \" v-for=\"(ins,ins_index) in invite_set\" :key=\"ins_index\">\n                                            <li class=\"privilege-item first-item\">\n                                                <div class=\"vip-type\">\n                                                    <p class=\"vip-type-icon\">\n                                                        <span class=\"vip-icon vip-middle icon-size-middle\"></span>\n                                                    </p>\n                                                    <span class=\"vip-type-title\">{{ ins_index+1 }} 级奖励项</span>\n                                                </div>\n\n                                            </li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">{{ ins.invite_c }} 人</li>\n                                            <li class=\"privilege-item\">￥ {{ins.invite_amount}}</li>\n                                            <li class=\"privilege-item\" style=\"background: #fbf9f8\">{{ ins.vip?ins.vip.title:'无' }}</li>\n\n                                        </ul>\n                                    </div>\n                                </div>\n                                <div class=\"col-12\">\n                                    <el-table :data=\"tableInvite\" stripe style=\"width: 100%\">\n                                        <el-table-column prop=\"created_at\" label=\"时间\" />\n                                        <el-table-column prop=\"invite_user.name\" label=\"邀请人\" />\n                                        <el-table-column prop=\"user_id\" label=\"邀请人ID\" />\n                                    </el-table>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n        <el-dialog\n            v-model=\"dialogVip\"\n            class=\"vip_mb\"\n            title=\"会员升级\"\n            append-to-body\n        >\n            <el-alert class=\"mb-2\" title=\"选择好VIP套餐后，点击立即升级生成二维码支付！\" type=\"primary\" :closable=\"false\" show-icon />\n\n            <div class=\"qr_fing\" v-loading=\"qr_load\">\n                <qrcode-vue  v-if=\"qr_show\" :value=\"pay_scan\" size=\"240\" class=\"mt-2 mb-2 m-auto d-sm-block\"  ></qrcode-vue>\n            </div>\n\n            <el-form :model=\"form\">\n                <el-form-item label=\"购买会员\">\n                    <el-radio-group v-model=\"form.vip_type\">\n                        <el-radio-button @change=\"changeRadio(item.id,item.pay_amount)\" v-for=\"(item,index) in vip_list\" :key=\"index\" :label=\"item.id\">\n                            {{ item.title }} ￥{{ item.pay_amount }}\n                        </el-radio-button>\n                    </el-radio-group>\n                </el-form-item>\n                <el-form-item label=\"支付方式\">\n                    <el-radio  v-model=\"form.pay_type\" v-if=\"counter.setting.pay_wechat_open==1\" label=\"wechat\">微信</el-radio>\n                    <el-radio  v-model=\"form.pay_type\" v-if=\"counter.setting.pay_alipay_open==1\" label=\"alipay\">支付宝</el-radio>\n                </el-form-item>\n\n            </el-form>\n            <template #footer>\n                                      <span class=\"dialog-footer\">\n                                        <el-button type=\"primary\" @click=\"up_to_vip()\">立即升级</el-button>\n                                        <el-button type=\"primary\" plain @click=\"dialogVip = false\">\n                                          完成支付\n                                        </el-button>\n                                      </span>\n            </template>\n        </el-dialog>\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {kami_send} from \"~/utils/api\";\n\ndefinePageMeta({\n    middleware: ['islogin']\n})\nimport { useCounter } from '~/store/counter'\nconst counter = useCounter()\nimport type { UploadProps } from 'element-plus'\n\nuseHead({\n    title: '个人中心 - '+counter.setting.title,\n    meta: [\n        { name: 'description', content: counter.setting.description},\n        { name: 'keywords', content: counter.setting.keywords}\n    ]\n})\nimport {ref,reactive} from 'vue'\nimport { ElMessage,ElTable,ElNotification  } from 'element-plus'\nimport QrcodeVue from 'qrcode.vue'\n\nconst token = useCookie('token')\nconst router = useRouter()\nconst user_info = useCookie('user_info')\nconst actions  = counter.setting.APP_URL+'/api/upload_avatar'\nconst c_change = ref('me')\nconst me_info = ref({\n    name:'',\n    phone:'',\n    description:'',\n})\nconst tableData = ref([])\nconst tableVip = ref([])\nconst s_loading = ref(false)\nconst up_loading = ref(false)\nconst now_loading = ref(true)\nconst me_vip = ref({})\nconst invite_set = ref([])\nconst sigt_out = () => {\n    token.value = ''\n    ElMessage.success('退出成功')\n    router.push('/')\n}\n\nconst now_user = () =>{\n    s_loading.value = true\n    now_loading.value = true\n    get_user().then((res:any) => {\n        me_info.value = res._rawValue.data\n        me_vip.value = res._rawValue.vip\n        tableData.value = res._rawValue.order\n        tableVip.value = res._rawValue.v_order\n        invite_code.value = res._rawValue.data.invite_code\n        tableInvite.value = res._rawValue.invite_meta\n        invite_set.value = res._rawValue.invite_set\n        s_loading.value = false\n        now_loading.value = false\n    }).catch((err:any) => {\n        s_loading.value = false\n        now_loading.value = false\n        console.log(err)\n    })\n}\nnow_user()\nconst vip_list = ref([])\nconst get_vip = () => {\n    get_vip_show().then((res:any) => {\n        vip_list.value = res._rawValue.data\n        vip_ids.value = res._rawValue.data[0].id\n        vip_now_money.value = res._rawValue.data[0].pay_amount\n    }).catch((err:any) => {\n        ElMessage.error('获取失败')\n    })\n}\nget_vip()\nconst change_set = (options:string) => {\n    c_change.value = options\n}\nconst update_info = () => {\n    up_loading.value = true\n    update_user({\n        name:me_info.value.name,\n        phone:me_info.value.phone,\n        description:me_info.value.description,\n    }).then((res:any) => {\n        now_user()\n        up_loading.value = false\n        ElMessage.success('修改成功')\n    }).catch((err:any) => {\n        up_loading.value = false\n        console.log(err)\n    })\n}\nconst pass_loading = ref(false)\nconst pass_all = ref({\n    old_password:'',\n    new_password:'',\n    new_password_confirmation:'',\n})\nconst c_pass = () => {\n    pass_loading.value = true\n    if (pass_all.value.new_password != pass_all.value.new_password_confirmation) {\n        ElMessage.error('两次密码不一致')\n        pass_loading.value = false\n        return\n    }\n    change_password({\n        password:pass_all.value.old_password,\n        new_password:pass_all.value.new_password,\n    }).then((res:any) => {\n        pass_loading.value = false\n        ElMessage.success('修改成功')\n        pass_all.value = {\n            old_password:'',\n            new_password:'',\n            new_password_confirmation:'',\n        }\n    }).catch((err:any) => {\n        pass_loading.value = false\n        ElMessage.error(err.message)\n    })\n}\n\nconst dialogFormVisible = ref(false)\nconst form = reactive({\n    amount:1,\n    pay_type:'alipay',\n    vip_type:1,\n})\nconst charge = () => {\n    dialogFormVisible.value = true\n}\nconst pay_scan = ref('')\nconst charge_loading = ref(false)\nconst qr_load = ref(false)\nconst qr_show = ref(false)\nconst send_charge = () => {\n    if (form.amount == 0) {\n        ElMessage.error('请输入充值金额')\n        return\n    }\n    charge_loading.value = true\n    qr_load.value = true\n    qr_show.value = true\n\n    if (form.pay_type == 'alipay') {\n        alipay({\n            amount:form.amount,\n            type:'charge',\n        }).then((res:any) => {\n            pay_scan.value = res._rawValue.qr_code\n            charge_loading.value = false\n            qr_load.value = false\n        }).catch((err:any) => {\n            charge_loading.value = false\n            qr_load.value = false\n            console.log(err.message)\n        })\n    }else{\n        wechat({\n            amount:form.amount,\n            type:'charge',\n        }).then((res:any) => {\n            pay_scan.value = res._rawValue.qr_code\n            charge_loading.value = false\n            qr_load.value = false\n        }).catch((err:any) => {\n            charge_loading.value = false\n            qr_load.value = false\n            console.log(err.message)\n        })\n    }\n\n}\n// VIP bug\nconst dialogVip = ref(false)\nconst up_vip_dialog = ()=>{\n    dialogVip.value = true\n}\nconst up_to_vip = () => {\n    if (vip_ids.value == '') {\n        ElMessage.error('请选择VIP套餐')\n        return\n    }\n    charge_loading.value = true\n    qr_load.value = true\n    qr_show.value = true\n    if (form.pay_type == 'alipay') {\n        alipay({\n            v_id:vip_ids.value,\n            amount:vip_now_money.value,\n            type:'vip',\n        }).then((res:any) => {\n            pay_scan.value = res._rawValue.qr_code\n            charge_loading.value = false\n            qr_load.value = false\n        }).catch((err:any) => {\n            charge_loading.value = false\n            qr_load.value = false\n            console.log(err.message)\n        })\n    }else{\n        wechat({\n            v_id:vip_ids.value,\n            amount:vip_now_money.value,\n            type:'vip',\n        }).then((res:any) => {\n            pay_scan.value = res._rawValue.qr_code\n            charge_loading.value = false\n            qr_load.value = false\n        }).catch((err:any) => {\n            charge_loading.value = false\n            qr_load.value = false\n            console.log(err.message)\n        })\n    }\n}\nconst vip_ids = ref('')\nconst vip_now_money = ref(0)\nconst changeRadio = (ids:string,money:any) => {\n    vip_ids.value = ids\n    vip_now_money.value = money\n}\nconst invite_code = ref('')\nconst tableInvite = ref([\n\n])\nconst copy_invite = () => {\n    const input = document.createElement('input')\n    input.setAttribute('readonly', 'readonly')\n    input.setAttribute('value', invite_code.value)\n    document.body.appendChild(input)\n    input.select()\n    if (document.execCommand('copy')) {\n        document.execCommand('copy')\n        ElMessage.success('复制成功')\n    }\n    document.body.removeChild(input)\n}\nconst invite_up = () =>{\n    invite_code_send().then((res:any)=>{\n        invite_code.value = res._rawValue.data\n        ElMessage.success(\n            '邀请码已更新'\n        )\n    }).catch((err:any)=>{\n        console.log(err)\n    })\n}\nconst kami_code = ref('')\nconst kami_loading = ref(false)\nconst change_code = ()=>{\n    if (kami_code.value == '') {\n        ElMessage.error('请输入卡密')\n        return\n    }\n    kami_loading.value = true\n    kami_send({\n        code:kami_code.value,\n    }).then((res:any)=>{\n        ElNotification({\n            title: '成功',\n            message: res._rawValue.info,\n            type: 'success',\n        })\n        kami_code.value = ''\n        kami_loading.value = false\n        now_user()\n    }).catch((err:any)=>{\n        kami_loading.value = false\n        console.log(err)\n    })\n}\nconst handleAvatarSuccess: UploadProps['onSuccess'] = (\n    response,\n    uploadFile\n) => {\n    console.log(URL.createObjectURL(uploadFile.raw!))\n    ElMessage.success('上传成功')\n    now_user()\n}\nconst beforeAvatarUpload: UploadProps['beforeUpload'] = (rawFile) => {\n    if (rawFile.type !== 'image/jpeg' && rawFile.type !== 'image/png') {\n        ElMessage.error('仅支持jpg/png格式图片!')\n        return false\n    } else if (rawFile.size / 1024 / 1024 > 2) {\n        ElMessage.error('图片大小不能超过 2MB!')\n        return false\n    }\n    return true\n}\n</script>\n\n<style>\n.avatar-uploader .el-upload{\n    display:inline\n}\n</style>\n"],"names":["useHead","title","meta","name","content","phone","description","get_user","me_info","me_vip","tableData","tableVip","tableInvite","invite_set","console","now_user","get_vip_show","vip_list","vip_ids","vip_now_money","ElMessage","get_vip","update_user","old_password","new_password","new_password_confirmation","change_password","password","amount","pay_type","vip_type","alipay","type","pay_scan","wechat","kami_send","ElNotification","message"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}